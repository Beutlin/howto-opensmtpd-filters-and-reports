<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="666px" preserveAspectRatio="none" style="width:687px;height:666px;background:#FFFFFF;" version="1.1" viewBox="0 0 687 666" width="687px" zoomAndPan="magnify"><defs><filter height="300%" id="f124ncd5mp0js6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f124ncd5mp0js6)" height="346.4609" style="stroke:#000000;stroke-width:2.0;" width="624.5" x="10" y="57.2969"/><rect fill="#FFFFFF" filter="url(#f124ncd5mp0js6)" height="85.3984" style="stroke:#000000;stroke-width:2.0;" width="610.5" x="10" y="450.8906"/><rect fill="#FFFFFF" filter="url(#f124ncd5mp0js6)" height="56.2656" style="stroke:#000000;stroke-width:2.0;" width="660.5" x="10" y="550.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="70" x2="70" y1="40.2969" y2="623.5547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="430" x2="430" y1="40.2969" y2="623.5547"/><rect fill="#FEFECE" filter="url(#f124ncd5mp0js6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="27" y="24.9951">OpenSmtpd</text><rect fill="#FEFECE" filter="url(#f124ncd5mp0js6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="20" y="622.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="27" y="642.5498">OpenSmtpd</text><rect fill="#FEFECE" filter="url(#f124ncd5mp0js6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="47" x="405" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="412" y="24.9951">Filter</text><rect fill="#FEFECE" filter="url(#f124ncd5mp0js6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="47" x="405" y="622.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="412" y="642.5498">Filter</text><path d="M10,57.2969 L257,57.2969 L257,64.2969 L247,74.2969 L10,74.2969 L10,57.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="346.4609" style="stroke:#000000;stroke-width:2.0;" width="624.5" x="10" y="57.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="202" x="25" y="70.3638">Registering reports / filters</text><rect fill="#EEEEEE" filter="url(#f124ncd5mp0js6)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="680.5" x="0" y="94.9961"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="680.5" y1="94.9961" y2="94.9961"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="680.5" y1="97.9961" y2="97.9961"/><rect fill="#EEEEEE" filter="url(#f124ncd5mp0js6)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="108" x="286.25" y="84.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="89" x="292.25" y="100.4966">Initialisation</text><polygon fill="#A80036" points="418.5,134.6953,428.5,138.6953,418.5,142.6953,422.5,138.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="70.5" x2="424.5" y1="138.6953" y2="138.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="77.5" y="133.6294">config|smtpd-version|6.8.0p2</text><polygon fill="#A80036" points="418.5,163.8281,428.5,167.8281,418.5,171.8281,422.5,167.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="70.5" x2="424.5" y1="167.8281" y2="167.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="77.5" y="162.7622">config|smtp-session-timeout|300</text><polygon fill="#A80036" points="418.5,192.9609,428.5,196.9609,418.5,200.9609,422.5,196.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="70.5" x2="424.5" y1="196.9609" y2="196.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="77.5" y="191.895">config|ready</text><rect fill="#EEEEEE" filter="url(#f124ncd5mp0js6)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="680.5" x="0" y="225.5273"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="680.5" y1="225.5273" y2="225.5273"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="680.5" y1="228.5273" y2="228.5273"/><rect fill="#EEEEEE" filter="url(#f124ncd5mp0js6)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="159" x="260.75" y="214.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="140" x="266.75" y="231.0278">Required response</text><polygon fill="#A80036" points="81.5,265.2266,71.5,269.2266,81.5,273.2266,77.5,269.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="75.5" x2="429.5" y1="269.2266" y2="269.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="87.5" y="264.1606">register|filter|smtp-in|mail-from</text><polygon fill="#A80036" points="81.5,294.3594,71.5,298.3594,81.5,302.3594,77.5,298.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="75.5" x2="429.5" y1="298.3594" y2="298.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="87.5" y="293.2935">register|filter|smtp-in|rcpt-to</text><polygon fill="#A80036" points="81.5,323.4922,71.5,327.4922,81.5,331.4922,77.5,327.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="75.5" x2="429.5" y1="327.4922" y2="327.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="87.5" y="322.4263">register|report|smtp-out|timeout</text><polygon fill="#A80036" points="81.5,357.625,71.5,361.625,81.5,365.625,77.5,361.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="75.5" x2="429.5" y1="361.625" y2="361.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="87.5" y="356.5591">register|report|smtp-in|link-auth</text><path d="M435,340.4922 L435,365.4922 L615,365.4922 L615,350.4922 L605,340.4922 L435,340.4922 " fill="#FBFB77" filter="url(#f124ncd5mp0js6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M605,340.4922 L605,350.4922 L615,350.4922 L605,340.4922 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="441" y="357.5591">register filter and reports</text><polygon fill="#A80036" points="81.5,391.7578,71.5,395.7578,81.5,399.7578,77.5,395.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="75.5" x2="429.5" y1="395.7578" y2="395.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="87.5" y="390.6919">register|ready</text><polygon fill="#FBFB77" filter="url(#f124ncd5mp0js6)" points="57,415.7578,83,415.7578,93,426.7578,83,438.7578,57,438.7578,47,426.7578,57,415.7578" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="59" y="431.8247">idle</text><path d="M10,450.8906 L139,450.8906 L139,457.8906 L129,467.8906 L10,467.8906 L10,450.8906 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="85.3984" style="stroke:#000000;stroke-width:2.0;" width="610.5" x="10" y="450.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="84" x="25" y="463.9575">Filter event</text><polygon fill="#A80036" points="418.5,485.1563,428.5,489.1563,418.5,493.1563,422.5,489.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="70.5" x2="424.5" y1="489.1563" y2="489.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="336" x="77.5" y="484.0903">filter|smtp-in|mail-from|msgid-123|from@home.local</text><polygon fill="#A80036" points="81.5,519.2891,71.5,523.2891,81.5,527.2891,77.5,523.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="75.5" x2="429.5" y1="523.2891" y2="523.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="87.5" y="518.2231">filter-result|msgid-123|proceed</text><path d="M435,502.1563 L435,527.1563 L601,527.1563 L601,512.1563 L591,502.1563 L435,502.1563 " fill="#FBFB77" filter="url(#f124ncd5mp0js6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M591,502.1563 L591,512.1563 L601,512.1563 L591,502.1563 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="441" y="519.2231">filter: proceed or reject</text><path d="M10,550.2891 L151,550.2891 L151,557.2891 L141,567.2891 L10,567.2891 L10,550.2891 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="56.2656" style="stroke:#000000;stroke-width:2.0;" width="660.5" x="10" y="550.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="96" x="25" y="563.356">Report Event</text><polygon fill="#A80036" points="418.5,589.5547,428.5,593.5547,418.5,597.5547,422.5,593.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="70.5" x2="424.5" y1="593.5547" y2="593.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310" x="77.5" y="588.4888">report|smtp-in|tx-rcpt|msgid-123|to@home.local</text><path d="M435,572.4219 L435,597.4219 L651,597.4219 L651,582.4219 L641,572.4219 L435,572.4219 " fill="#FBFB77" filter="url(#f124ncd5mp0js6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M641,572.4219 L641,582.4219 L651,582.4219 L641,572.4219 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="441" y="589.4888">report: no response necessary</text><!--MD5=[0342dd5fc1ae06dd2fd418959969d38c]
@startuml
group Registering reports / filters
== Initialisation ==
OpenSmtpd -> Filter: config|smtpd-version|6.8.0p2
OpenSmtpd -> Filter: config|smtp-session-timeout|300
OpenSmtpd -> Filter: config|ready
== Required response ==

Filter - -> OpenSmtpd: register|filter|smtp-in|mail-from
Filter - -> OpenSmtpd: register|filter|smtp-in|rcpt-to
Filter - -> OpenSmtpd: register|report|smtp-out|timeout
Filter - -> OpenSmtpd: register|report|smtp-in|link-auth
note right: register filter and reports
Filter - -> OpenSmtpd: register|ready


end
hnote over OpenSmtpd : idle
group Filter event

OpenSmtpd -> Filter: filter|smtp-in|mail-from|msgid-123|from@home.local
Filter - -> OpenSmtpd: filter-result|msgid-123|proceed
note right: filter: proceed or reject
end

group Report Event
OpenSmtpd -> Filter: report|smtp-in|tx-rcpt|msgid-123|to@home.local
note right: report: no response necessary
end
@enduml

PlantUML version 1.2021.16(Wed Dec 08 17:25:22 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>